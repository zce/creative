/*!
 * creative v0.1.0-alpha.0 (https://github.com/zce/creative#readme)
 * Copyright 2018 zce <w@zce.me> (https://zce.me)
 * Licensed under MIT
 */"use strict";var setup=function(){var e=document.querySelector.bind(document),t=document.querySelectorAll.bind(document);function n(e,t){var n=document.createElement("script");n.src=e,t&&n.addEventListener("load",t),document.body.appendChild(n)}var o=e("#search_input");o&&n("https://unpkg.com/ghost-search/dist/ghost-search.js",function(){var t=document.createElement("div");t.id="search_result",t.className="dropdown-menu dropdown-menu-right",t.innerHTML='<span class="dropdown-item disabled">'.concat(o.placeholder,"</span>"),o.parentElement.classList.add("dropdown"),o.parentElement.appendChild(t),new window.GhostSearch({input:"#search_input",results:"#search_result",template:function(e){return'<a class="dropdown-item" href="'.concat(e.url,'">').concat(e.title,"</a>")},api:{parameters:{fields:["url","title"]}},on:{afterDisplay:function(e){return 0===e.total&&(!!o.value&&void(t.innerHTML='<span class="dropdown-item disabled">'.concat(o.dataset.empty,"</span>")))}}})}),e(".post-card [data-src]")&&n("https://unpkg.com/vanilla-lazyload",function(){window.lazyloader=new window.LazyLoad({elements_selector:".post-card [data-src]"})}),t(".post-content pre code").length&&n("https://unpkg.com/prismjs/prism.js"),t(".kg-gallery-image > img").forEach(function(e){var t=e.closest(".kg-gallery-image"),n=e.attributes.width.value/e.attributes.height.value;t.style.flex=n+" 1 0%"});var r,i,a=t(".kg-gallery-container");a.length&&(r="https://unpkg.com/lightgallery.js/dist/css/lightgallery.min.css",(i=document.createElement("link")).rel="stylesheet",i.href=r,document.head.appendChild(i),n("https://unpkg.com/lightgallery.js/dist/js/lightgallery.js",function(){a.forEach(function(e){e.querySelectorAll(".kg-gallery-image").forEach(function(e){e.dataset.src=e.children[0].src}),window.lightGallery(e,{selector:".kg-gallery-image"})})})),t(".post-share a").forEach(function(e){return e.addEventListener("click",function(e){var t=void 0!==window.screenLeft?window.screenLeft:window.screenX,n=void 0!==window.screenTop?window.screenTop:window.screenY,o=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width)/2-320+t,r=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height)/2-200+n,i=window.open(e.currentTarget.href,"share-window","scrollbars=yes, width=".concat(640,", height=").concat(400,", top=").concat(r,", left=").concat(o));window.focus&&i.focus(),e.preventDefault()})}),t("input[name=location]").forEach(function(e){e.value=e.value||window.location.href}),t("input[name=referrer]").forEach(function(e){e.value=e.value||document.referrer});var c=e(".site-spinner");c&&(c.style.opacity=0,setTimeout(function(){return c.parentElement.removeChild(c)},1e3))};window.addEventListener("load",setup);